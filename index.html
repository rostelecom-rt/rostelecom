<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>–†–æ—Å—Ç–µ–ª–µ–∫–æ–º | –ß–∞—Ç —Å –ú–∏—Ö–∞–∏–ª–æ–º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --rt-purple: #7722FF;
            --rt-purple-dark: #5511CC;
            --rt-orange: #FF4F12;
            --rt-gradient: linear-gradient(135deg, #7722FF 0%, #AD22FF 100%);
        }
        
        html, body { 
            font-family: 'Inter', sans-serif; 
            background: #f0f2f5; 
            background-image: radial-gradient(#d1d5db 0.5px, transparent 0.5px);
            background-size: 24px 24px;
            height: 100%;
            height: -webkit-fill-available;
            overflow: hidden;
            margin: 0;
            padding: 0;
            position: fixed;
            width: 100%;
        }

        .main-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
            max-width: 800px; 
            margin: 0 auto;
            background: #f0f2f5;
            position: relative;
        }

        .glass-header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            flex-shrink: 0;
            z-index: 50;
        }

        #chat-window {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            -webkit-overflow-scrolling: touch;
        }

        .input-area {
            flex-shrink: 0;
            padding: 1rem;
            padding-bottom: calc(1rem + env(safe-area-inset-bottom));
            background: linear-gradient(to top, #f0f2f5 80%, transparent);
            z-index: 40;
        }

        .message-anim { 
            animation: messageSlide 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards; 
            opacity: 0;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .bot-bubble {
            background: white;
            border-bottom-left-radius: 4px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .user-bubble {
            background: var(--rt-gradient);
            border-bottom-right-radius: 4px;
            box-shadow: 0 8px 20px rgba(119, 34, 255, 0.2);
        }

        .typing-dot {
            width: 6px; height: 6px; background: #94a3b8; border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out;
        }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0.3); opacity: 0.4; }
            40% { transform: scale(1); opacity: 1; }
        }

        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

        @media (max-width: 480px) {
            #quick-benefits { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="main-container shadow-2xl">
        <nav class="glass-header border-b border-slate-200 px-4 py-3 flex items-center justify-between shadow-sm">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-white rounded-xl shadow-inner border border-slate-100 flex items-center justify-center p-1.5 overflow-hidden">
                    <img src="./logo.png" class="w-full h-full object-contain" alt="–õ–æ–≥–æ—Ç–∏–ø" onerror="this.src='https://www.rt.ru/favicon.ico'">
                </div>
                <div>
                    <span class="font-bold text-base tracking-tight text-slate-800 leading-none block">–†–æ—Å—Ç–µ–ª–µ–∫–æ–º</span>
                    <span class="text-[10px] text-green-600 font-bold uppercase tracking-widest mt-0.5 block">VIP-–∫–∞–Ω–∞–ª —Å–≤—è–∑–∏</span>
                </div>
            </div>
            <div class="flex items-center gap-3">
                <div class="text-right hidden sm:block">
                    <p class="text-xs font-bold text-slate-700 leading-none">–ú–∏—Ö–∞–∏–ª</p>
                    <p class="text-[10px] text-slate-400 font-medium mt-1 italic">–ü–æ–¥–±–∏—Ä–∞–µ—Ç —Ç–∞—Ä–∏—Ñ...</p>
                </div>
                <div class="relative">
                    <div class="w-11 h-11 rounded-full border-2 border-rt-purple p-0.5 shadow-md overflow-hidden bg-slate-100">
                        <img src="https://images.unsplash.com/photo-1599566150163-29194dcaad36?q=80&w=200&auto=format&fit=crop" 
                            class="w-full h-full rounded-full object-cover" 
                            alt="–ú–∏—Ö–∞–∏–ª"
                            onerror="this.src='https://ui-avatars.com/api/?name=–ú–∏—Ö–∞–∏–ª&background=7722FF&color=fff'">
                    </div>
                    <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"></span>
                </div>
            </div>
        </nav>

        <div id="chat-window" class="custom-scrollbar">
            <div id="quick-benefits" class="grid grid-cols-2 gap-2 mb-2">
                <div class="benefit-card bg-white p-3 rounded-xl border border-slate-100 shadow-sm flex items-center gap-2">
                    <div class="bg-purple-50 p-1.5 rounded-lg text-rt-purple"><i data-lucide="clock" class="w-4 h-4"></i></div>
                    <span class="text-[11px] font-bold text-slate-600">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥–±–æ—Ä</span>
                </div>
                <div class="benefit-card bg-white p-3 rounded-xl border border-slate-100 shadow-sm flex items-center gap-2">
                    <div class="bg-orange-50 p-1.5 rounded-lg text-rt-orange"><i data-lucide="gift" class="w-4 h-4"></i></div>
                    <span class="text-[11px] font-bold text-slate-600">–ë–æ–Ω—É—Å—ã –Ω–æ–≤—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º</span>
                </div>
            </div>
        </div>

        <div id="typing-indicator" class="hidden px-4 mb-2">
            <div class="bg-white px-5 py-3 rounded-2xl shadow-sm border border-slate-100 w-max flex gap-2">
                <div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>
            </div>
        </div>

        <div class="input-area">
            <form id="chat-form" class="flex items-center gap-2">
                <input type="text" id="user-input" autocomplete="off" class="flex-grow bg-white border-2 border-slate-200 rounded-2xl px-6 py-4 focus:border-rt-purple outline-none shadow-xl transition-all text-slate-700 font-medium placeholder:text-slate-400" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –∑–¥–µ—Å—å...">
                <button type="submit" class="bg-sky-500/90 hover:bg-sky-600 text-white p-4 rounded-2xl flex items-center justify-center border border-white/20 backdrop-blur-sm shadow-lg shadow-sky-500/30">
                    <i data-lucide="send" class="w-6 h-6"></i>
                </button>
            </form>
            <div class="flex items-center justify-center gap-2 mt-3 opacity-60">
                <i data-lucide="shield-check" class="w-3 h-3 text-slate-500"></i>
                <span class="text-[9px] uppercase tracking-[0.2em] font-bold text-slate-500">–î–∞–Ω–Ω—ã–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã AES-256</span>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        const chatWindow = document.getElementById('chat-window');
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const typingIndicator = document.getElementById('typing-indicator');

        const userData = { name: '', address: '', phone: '' };
        let currentStep = 0;

        const steps = [
            { question: "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é! üëã –ú–µ–Ω—è –∑–æ–≤—É—Ç –ú–∏—Ö–∞–∏–ª, —è –≤–∞—à –ª–∏—á–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –†–æ—Å—Ç–µ–ª–µ–∫–æ–º. –°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!", field: 'greeting' },
            { question: "–ß—Ç–æ–±—ã —è –ø–æ–¥–æ–±—Ä–∞–ª –¥–ª—è –≤–∞—Å —Ç–∞—Ä–∏—Ñ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≤—ã–≥–æ–¥–æ–π, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ 3 –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–∞. –≠—Ç–æ –∑–∞–π–º–µ—Ç –º–µ–Ω—å—à–µ –º–∏–Ω—É—Ç—ã. –ì–æ—Ç–æ–≤—ã? <br><br><b>–ö–∞–∫ –º–Ω–µ –ª—É—á—à–µ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?</b>", field: 'name' },
            { question: "–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, {name}! ü§ù –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –∞–¥—Ä–µ—Å (–≥–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º). –Ø –ø—Ä–æ–≤–µ—Ä—é, –∫–∞–∫–∏–µ —Ç–∞—Ä–∏—Ñ—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –≤–∞—à–µ–º –¥–æ–º–µ.", field: 'address' },
            { question: "–°–ø–∞—Å–∏–±–æ! –û—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —è –ø–µ—Ä–µ–∑–≤–æ–Ω—é –≤–∞–º –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç, —á—Ç–æ–±—ã –æ–±—Å—É–¥–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –≤–∞—à—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É!", field: 'phone' },
            { question: "–£—Ä–∞! üéâ –ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞. –Ø —É–∂–µ —Ñ–æ—Ä–º–∏—Ä—É—é —Å–ø–∏—Å–æ–∫ –ª—É—á—à–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –¥–ª—è –≤–∞—Å. –ñ–¥–∏—Ç–µ –∑–≤–æ–Ω–∫–∞ —Å –Ω–æ–º–µ—Ä–∞ +7(991)424-23-37, —è –Ω–∞ —Å–≤—è–∑–∏!", field: 'done' }
        ];

        function addMessage(text, isBot = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isBot ? 'justify-start' : 'justify-end'} message-anim`;
            const contentClass = isBot ? 'bot-bubble text-slate-700 border border-slate-100 rounded-2xl rounded-tl-none' : 'user-bubble text-white rounded-2xl rounded-tr-none';
            messageDiv.innerHTML = `<div class="max-w-[88%] px-5 py-4 ${contentClass}"><p class="text-sm md:text-base leading-relaxed font-medium">${text}</p><div class="flex items-center justify-end gap-1 mt-2 opacity-50"><span class="text-[10px] font-bold">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>${!isBot ? '<i data-lucide="check-check" class="w-3 h-3"></i>' : ''}</div></div>`;
            chatWindow.appendChild(messageDiv);
            if (!isBot) lucide.createIcons();
            chatWindow.scrollTo({ top: chatWindow.scrollHeight, behavior: 'smooth' });
        }

        async function botAsk() {
            if (currentStep < steps.length) {
                typingIndicator.classList.remove('hidden');
                chatWindow.scrollTo({ top: chatWindow.scrollHeight, behavior: 'smooth' });
                const delay = Math.min(Math.max(steps[currentStep].question.length * 15, 1000), 3000);
                await new Promise(r => setTimeout(r, delay));
                typingIndicator.classList.add('hidden');
                let text = steps[currentStep].question.replace('{name}', userData.name || '');
                addMessage(text);
                if (steps[currentStep].field === 'greeting') { currentStep++; botAsk(); return; }
                if (steps[currentStep].field === 'done') {
                    confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#7722FF', '#FF4F12', '#ffffff'] });
                    sendToGoogle();
                    userInput.disabled = true;
                    userInput.placeholder = "–î–∏–∞–ª–æ–≥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω";
                }
            }
        }

        function sendToGoogle() {
            const url = `https://docs.google.com/forms/d/e/1FAIpQLSe-P7z4ysbO75kTrBFRr0l4PsTv1STzAfetqRyvdFkyVetCRQ/formResponse?entry.1533723519=${encodeURIComponent(userData.name)}&entry.2057814462=${encodeURIComponent(userData.address)}&entry.629779220=${encodeURIComponent(userData.phone)}&submit=Submit`;
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            iframe.src = url;
            setTimeout(() => { if(iframe.parentNode) document.body.removeChild(iframe); }, 2000);
        }

        chatForm.onsubmit = (e) => {
            e.preventDefault();
            const text = userInput.value.trim();
            if (!text || currentStep >= steps.length - 1) return;
            addMessage(text, false);
            userData[steps[currentStep].field] = text;
            userInput.value = '';
            currentStep++;
            botAsk();
            document.getElementById('quick-benefits').style.opacity = '0.5';
        };

        userInput.addEventListener('focus', () => {
            setTimeout(() => {
                chatWindow.scrollTo({ top: chatWindow.scrollHeight, behavior: 'smooth' });
            }, 300);
        });

        setTimeout(botAsk, 500);
    </script>
</body>
</html>
